<div
  class="relative bg-white p-6 rounded-lg w-full max-w-lg mx-auto overflow-visible"
  #popoverContainer
>
  <button
    class="absolute top-2 right-2 text-gray-500 hover:text-gray-700"
    mat-icon-button
    (click)="closeDialog()"
  >
    <mat-icon>close</mat-icon>
  </button>

  <h2 class="text-xl font-semibold text-center mb-4">Validar Certificación de <strong *ngIf="survey">{{survey.name | titlecase}}</strong></h2>
  <h3 class="text-md font-semibold text-center mb-4" *ngIf="survey">Tipo de Documento: <strong *ngIf="survey">{{survey.identificationType}}</strong></h3>
  <h3 class="text-md font-semibold text-center mb-4" *ngIf="survey">Número de Documento: <strong *ngIf="survey">{{survey.identification | number}}</strong></h3>

  <div class="flex flex-col md:flex-row md:justify-between gap-4 mb-6">
    <div class="flex-1 flex flex-col items-center">
      <h3 class="text-lg font-medium mb-2">Documento</h3>
      <div *ngIf="accountCert" class="w-full h-52 border border-gray-300 flex items-center justify-center overflow-hidden">
        <img 
          [src]="accountCert" 
          alt="Certificación Bancaria *de click para abrir en pestaña nueva" 
          class="object-cover h-full cursor-pointer" 
          (click)="onImageClick($event, accountCert)"
        />
      </div>
      
      <!-- Sección de datos bancarios -->
      <div *ngIf="dataBank" class="w-full mt-4 bg-pink-50 rounded-lg p-4 shadow-sm border border-pink-100">
        <h3 class="text-lg font-semibold text-pink-700 mb-3 text-center">Información Bancaria</h3>
        
        <div class="grid grid-cols-1 gap-2">
          <div class="flex justify-between items-center border-b border-pink-200 pb-2">
            <span class="font-medium text-pink-600">Banco:</span>
            <span class="text-gray-700">{{dataBank.Bank?.name}}</span>
          </div>
          
          <div class="flex justify-between items-center border-b border-pink-200 pb-2">
            <span class="font-medium text-pink-600">Tipo de cuenta:</span>
            <span class="text-gray-700">{{dataBank.accountType}}</span>
          </div>
          
          <div class="flex justify-between items-center border-b border-pink-200 pb-2">
            <span class="font-medium text-pink-600">Número de cuenta:</span>
            <span class="text-gray-700">{{dataBank.accountNumber}}</span>
          </div>
          
          <div class="flex justify-between items-center">
            <span class="font-medium text-pink-600">Email:</span>
            <span class="text-gray-700">{{dataBank.email}}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  

  <div class="flex justify-center gap-4 mb-4" *ngIf="!showMotivoInput">
    <button mat-raised-button color="warn" class="bg-red-500 hover:bg-red-600 text-white" (click)="onReject()">
      Rechazar
    </button>
    <button mat-raised-button color="primary" class="bg-blue-500 hover:bg-blue-600 text-white" (click)="onAccept()">
      Aceptar
    </button>
  </div>

  <div class="flex flex-col gap-4" *ngIf="showMotivoInput">
    <mat-form-field appearance="fill" class="w-full">
      <mat-label>Ingrese un motivo</mat-label>
      <input matInput [(ngModel)]="motive" />
    </mat-form-field>
    <button mat-raised-button color="accent" class="bg-green-500 hover:bg-green-600 text-white" (click)="confirmValidate()">
      Aceptar
    </button>
  </div>

  <div 
    *ngIf="showImageOptions" 
    class="absolute bg-white border border-gray-300 rounded-md shadow-md z-50 popover-menu"
    [ngStyle]="{'top.px': popoverY, 'left.px': popoverX}"
  >
    <button class="block w-full text-left px-4 py-2 hover:bg-gray-200" (click)="openImage()">
      Abrir
    </button>
    <button class="block w-full text-left px-4 py-2 hover:bg-gray-200" (click)="downloadImage()">
      Descargar
    </button>
  </div>
</div>
